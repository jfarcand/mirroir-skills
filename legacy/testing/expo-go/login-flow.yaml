name: Expo Go Login Flow
app: Expo Go
description: >
  Test the login screen of an Expo Go app. Handles both fresh
  signup and existing account cases using conditional branching â€”
  the AI adapts to whichever state it encounters.
ios_min: "17.0"
locale: "en_US"
tags: ["testing", "expo", "authentication", "conditional"]

steps:
  - launch: "Expo Go"
  - wait_for: "${APP_SCREEN:-LoginDemo}"
  - tap: "${APP_SCREEN:-LoginDemo}"
  - wait_for: "Email"
  - tap: "Email"
  - type: "${TEST_EMAIL}"
  - tap: "Password"
  - type: "${TEST_PASSWORD}"
  - tap: "Sign In"
  - condition:
      if_visible: "Invalid"
      then:
        - screenshot: "login_failed"
        - tap: "Sign Up"
        - tap: "Email"
        - type: "${TEST_EMAIL}"
        - tap: "Password"
        - type: "${TEST_PASSWORD}"
        - tap: "Create Account"
      else:
        - wait_for: "Welcome"
  - assert_visible: "Welcome"
  - screenshot: "login_success"
